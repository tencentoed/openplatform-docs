# <span id="API文档">API文档v1.2.5</span>

## <span id="版本修改记录">版本修改记录</span>
| 版本 | 修改日期 | 修改内容 | 备注 |
| ---- | ---- | ---- | ---- |
| v1.2.2 | 2020/10/12 | 1. 发布直播课接口入参teacher_id改为"第三方用户id"<br>2. 删除AccessToken相关描述 |  |
| v1.2.3 | 2020/10/19 | 加入“目前支持获取30天内的考勤信息”描述 |  |
| v1.2.4 | 2021/02/23 | 1. 修改所有teacher_id描述为"第三方用户id"<br>2. 发布直播课和获取直播课信息接口增加直播链接字段返回<br>3. 增加直播课删除接口 |  |
| v1.2.5 | 2021/03/08 | 1. 获取部门用户信息接口 增加source_id字段返回<br>2. 检索部门用户信息接口 增加source_id字段返回 |   |

## 1. <span id="开发前必读">开发前必读</span>

### <span id="简介">简介</span>

本API文档描述了接入课堂服务所必须的流程和规范。

**术语信息：**

| 名称        | 描述                                                         |
| ----------- | ------------------------------------------------------------ |
| Appid       | 每个接入应用都有唯一的id，第三方接入课堂前，首先应申请一个appid |
| SecretId    | 接入应用唯一身份识别ID                                       |
| SecretKey   | 接入应用唯一身份识别秘钥，是API调用的合法性唯一校验凭据      |

**快速入门：**

要接入腾讯课堂开放平台，需按如下步骤：

1. 申请腾讯课堂极速版服务，获取Appid。
2. 申请极速版API权限，获取SecretId、SecretKey。
3. 编写请求签名算法程序，详情请参见 [请求签名](#请求签名) 文档。

[>>>返回](#开发前必读)



### <span id="API阅读说明">API阅读说明</span>

本开发文档API接口作用域仅限于极速版课堂，文档中所有直播课为极速版直播课。
所有的接口需使用HTTPS协议、JSON数据格式、UTF8编码。

**接口格式说明如下：**

```
请求方式：GET/POST（HTTPS）
请求地址：https://api.ke.qq.com/cgi-proxy/open/v1/token/get?appid=ID&secret=SECRET
请求包体：
...

参数说明：
...

权限说明：
...

返回结果：
...

返回字段说明：
...

```


1. 请求方式，标明接口调用的HTTP方法，区分HttpGet/HttpPost请求。所有的请求都为https协议。
2. 请求地址，参数中标注大写的单词，表示为需要替换的变量。在上面的例子中 ID 及 SECRET 为需要替换的变量，根据实际获取值更新。假如，这里我们获取到的`ID=wxdd7253*******，SECRET=vQT_03RsfVA3uE6J5do******`，那么上述的请求在发送时为：
`https://api.ke.qq.com/cgi-proxy/open/v1/token/get?appid=wxdd7253*******&secret=vQT_03RsfVA3uE6J5do******`
3. 请求包体/参数说明，标明请求参数示例及说明，参数说明包括字段含义、取值范围，开发者在设计数据结构时，应参考该定义范围。
4. 权限说明，标明接口的使用范围，开发者应特别留意调用场景。比如，发布课程时的权限限制。
5. 返回结果/返回字段说明，标明返回参数示例及说明。特别留意，所有接口返回包里都有retcode，接口失败时会放回msg提示消息。开发者需根据retcode是否为0判断是否调用成功（retcode意义请见全局错误码）。而msg仅作参考，后续可能会有变动，因此不可作为是否调用成功的判据。

[>>>返回](#开发前必读)



### <span id="简介">公共请求参数</span>

此篇文档将为您介绍在使用 API 时候会使用到的公共请求参数，包括HTTP请求头部字段（Request Header），下文提到的参数或字段在之后的具体 API 文档中不再赘述。

请参考：[请求签名](#请求签名)

[>>>返回](#开发前必读)



### <span id="简介">公共响应字段</span>

此篇文档将为您介绍在使用 API 时候会出现的公响应字段，包括HTTP响应头部字段（Response Header），下文提到的字段在之后的具体 API 文档中不再赘述。

| 字段名称 | 说明           |
| -------- | -------------- |
| retcode  | 接口错误码     |
| errmsg   | 接口错误码描述 |
|          |                |

**示例：**

获取直播课信息响应包

```http
content-encoding: gzip
content-type: application/json;charset=utf-8
date: Sat, 29 Aug 2020 08:55:34 GMT
server: nginx
status: 200
vary: accept-encoding
x-request-id: a89d28f3-21d5-4f8f-8a63-4c7d5337cc00

{
    "retcode":0,
    "errmsg":"",
    "result":{
        "term_id": 1233444,
        "name": "计算机基础",
        "teacher_id":"xxxxx"
    }
}
```

[>>>返回](#开发前必读)



### <span id="简介">错误码</span>

本文档将为您介绍请求出错时返回的错误码和对应错误信息，包括HTTP状态错误码和API业务逻辑错误码，错误码会有必要更新，请一直查阅最新文档。基础错误码定义请参考[基础错误码表](#基础错误码表)，其它业务错误码参考业务关联API错误码表。

[>>>返回](#开发前必读)



### <span id="简介">请求签名</span>

调用API接口时都必须携带签名，用于保证接口数据安全性，主要解决以下问题：

1. **请求者身份验证**。通过访问者唯一 ID 和密钥确定请求者身份。
2. **防止传输数据篡改**。对数据签名并检验，保障传输内容完整性。
3. **防止签名被盗用**。对签名设置时效，避免签名盗用并重复使用。



#### 请求结构

1.**通讯协议**：所有接口均通过 HTTPS 进行通信，提供高安全性的通信通道。
2.**请求方法**：

- GET 请求支持的 Content-Type 类型：application/x-www-form-urlencoded
- POST 请求支持的 Content-Type 类型：application/json

3.**字符编码**：均使用UTF-8编码。

#### 公共参数

公共参数是用于标识用户和接口鉴权目的的参数，如非必要，在每个接口单独的接口文档中不再对这些参数进行说明，但每次请求均需要携带这些参数，
才能正常发起请求。 API 采用 KE1-HMAC-SHA256 签名方法，公共参数需要统一放到 HTTP Header 请求头部中。

| 参数名称           | 类型     | 必选 | 描述                                                             |
|------------------|---------|------|-----------------------------------------------------------------|
| Authorization    | String  | 是   | HTTP 标准身份认证头部字段，例如：`KE1-HMAC-SHA256 Credential=AKIDEXAMPLE/Date/service/ke1_request, SignedHeaders=content-type;host, Signature=fe5f80f77d5fa3beca038a248ff027d0445342fe2855ddc9******` <br/> 其中：<br/> - KE1-HMAC-SHA256：签名方法，目前固定取该值；<br/> - Credential：签名凭证，AKIDEXAMPLE 是 AppId；Date 是 UTC 标准时间的日期，取值需要和公共参数 X-KE-Timestamp 换算的 UTC 标准时间日期一致；service 为产品名；<br/> - SignedHeaders：参与签名计算的头部信息，content-type 和 host 为必选头部；<br/> - Signature：签名摘要 |
| X-KE-Timestamp   | Integer | 是   | 此参数参与签名计算。当前 UNIX 时间戳，可记录发起 API 请求的时间。例如1529223702，单位为秒。注意：如果与服务器时间相差超过5分钟，会引起签名过期错误。 |
| X-KE-Version     | String  | 是   | 操作的 API 的版本。目前固定为 v1.0.0                                 |



#### 签名过程（KE1-HMAC-SHA256）

下面以查询课程作为例子，分步骤介绍签名的计算过程。在示例中，不论公共参数或者接口参数，我们尽量选择容易犯错的情况。在实际调用接口时，
请根据实际情况来，每个接口的参数并不相同，不要照抄这个例子的参数和值。

假设用户的 appId 和 appSecret 分别是：`jLm29RJC6y5m29RJCpfjg*****` 和 `Nbr4GOmz1BBzc4RJC6yjLm295pfjgZJr*****`。
用户想要查看 获取指定直播课信息详情，则请求可能为：

```shell script
curl -X GET https://api.ke.qq.com/cgi-proxy/open/v1/course/info?term_id=10000 \
-H "Authorization: KE1-HMAC-SHA256 Credential=jLm29RJC6y5m29RJCpfjg*****/2020-09-16/edu/ke1_request, SignedHeaders=content-type;host, Signature=fe5f80f77d5fa3beca038a248ff027d0445342fe2855ddc9******" \
-H "Content-Type: application/x-www-form-urlencoded" \
-H "Host: api.ke.qq.com" \
-H "X-KE-Timestamp: 1600236479" \
-H "X-KE-Version: v1.0.0"
```

**1. 拼接规范请求串**

按如下伪代码格式拼接规范请求串（CanonicalRequest）：

```
CanonicalRequest =
    HTTPRequestMethod + '\n' +
    CanonicalURI + '\n' +
    CanonicalQueryString + '\n' +
    CanonicalHeaders + '\n' +
    SignedHeaders + '\n' +
    HashedRequestPayload
```

|       字段名称         | 解释                                                                                          |
|----------------------|-----------------------------------------------------------------------------------------------|
| HTTPRequestMethod    | HTTP 请求方法（GET、POST ）。此示例取值为 GET。                                                    |
| CanonicalURI         | URI 参数，例如：https://api.ke.qq.com/cgi-proxy/open/v1/course/info?term_id=10000， 此时 URI = /cgi-proxy/open/v1/course/info |
| CanonicalQueryString | 发起 HTTP 请求 URL 中的查询字符串，对于 POST 请求，固定为空字符串""，对于 GET 请求，则为 URL 中问号（?）后面的字符串内容，例如：term_id=10000。注意：CanonicalQueryString 需要参考 RFC3986 进行 URLEncode，字符集 UTF8，推荐使用编程语言标准库，所有特殊字符均需编码，大写形式。 |
| CanonicalHeaders     | 参与签名的头部信息，至少包含 host 和 content-type 两个头部，也可加入自定义的头部参与签名以提高自身请求的唯一性和安全性。<br/> 拼接规则： <br/> 1、头部 key 和 value 统一转成小写，并去掉首尾空格，按照 key:value\n 格式拼接； <br/> 2、多个头部，按照头部 key（小写）的 ASCII 升序进行拼接。<br/> <br/> 此示例计算结果是 content-type:application/json\nhost:ke.qq.com\n。<br/> 注意：content-type 必须和实际发送的相符合，有些编程语言网络库即使未指定也会自动添加 charset 值，如果签名时和发送时不一致，服务器会返回签名校验失败。|
| SignedHeaders        | 参与签名的头部信息，说明此次请求有哪些头部参与了签名，和 CanonicalHeaders 包含的头部内容是一一对应的。content-type 和 host 为必选头部。<br/>  拼接规则： <br/> 1.头部 key 统一转成小写；<br/> 2.多个头部 key（小写）按照 ASCII 升序进行拼接，并且以分号（;）分隔。 <br/> <br/> 此示例为 content-type;host|
| HashedRequestPayload | application/json 请求体按照key的字典顺序来排序（升序）,请求正文（payload，即 body，此示例为 ""）的哈希值，计算伪代码为 Lowercase(HexEncode(Hash.SHA256(RequestPayload)))，即对 HTTP 请求正文做 SHA256 哈希，然后十六进制编码，最后编码串转换成小写字母。对于 GET 请求，RequestPayload 固定为空字符串。此示例计算结果是 e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855。 |

根据以上规则，示例中得到的规范请求串如下：

```html
GET
/cgi-proxy/open/v1/course/info
term_id=10000
content-type:application/x-www-form-urlencoded
host:api.ke.qq.com
content-type;host
e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
```

**2. 拼接待签名字符串**

按如下格式拼接待签名字符串：

```
StringToSign =
    Algorithm + \n +
    RequestTimestamp + \n +
    CredentialScope + \n +
    HashedCanonicalRequest
```

|    字段名称              |  解释                                                                                               |
|------------------------|----------------------------------------------------------------------------------------------------|
| Algorithm              | 签名算法，目前固定为 KE1-HMAC-SHA256                                                                   |
| RequestTimestamp       | 请求时间戳，即请求头部的公共参数 X-KE-Timestamp 取值，取当前时间 UNIX 时间戳，精确到秒。此示例取值为 1598842124   |
| CredentialScope        | 凭证范围，格式为 Date/service/ke1_request，包含日期、所请求的服务和终止字符串（ke1_request）。**Date 为 UTC 标准时间的日期，取值需要和公共参数 X-KE-Timestamp 换算的 UTC 标准时间日期一致；**service 为产品名，必须与调用的产品域名一致。此示例计算结果是 2020-09-16/edu/ke1_request。 |
| HashedCanonicalRequest | 前述步骤拼接所得规范请求串的哈希值，计算伪代码为 Lowercase(HexEncode(Hash.SHA256(CanonicalRequest)))。此示例计算结果是 a68f0b94d99b3504378994eb9738a5f718f3c767a3168810d914ac9a45603096。|

> 注意：
>
> - 1.Date 必须从时间戳 X-KE-Timestamp 计算得到，且时区为 UTC+0。如果加入系统本地时区信息，例如东八区，将导致白天和晚上调用成功，但是凌晨时调用必定失败。假设时间戳为 1551113065，在东八区的时间是 2019-02-26 00:44:25，但是计算得到的 Date 取 UTC+0 的日期应为 2019-02-25，而不是 2019-02-26。
>
> - 2.Timestamp 必须是当前系统时间，且需确保系统时间和标准时间是同步的，如果相差超过五分钟则必定失败。如果长时间不和标准时间同步，可能导致运行一段时间后，请求必定失败，返回签名过期错误。
>

根据以上规则，示例中得到的待签名字符串如下：

```
KE1-HMAC-SHA256
1600236479
2020-09-16/edu/ke1_request
a68f0b94d99b3504378994eb9738a5f718f3c767a3168810d914ac9a45603096
```

**3.计算签名**

1）计算派生签名密钥，伪代码如下：

```
AppSecret = "Nbr4GOmz1BBzc4RJC6yjLm295pfjgZJr*****"
SecretDate = HMAC_SHA256("KE1" + AppSecret, Date)
SecretService = HMAC_SHA256(SecretDate, Service)
SecretSigning = HMAC_SHA256(SecretService, "ke1_request")
```

派生出的密钥 SecretDate、SecretService 和 SecretSigning 是二进制的数据，可能包含不可打印字符，此处不展示中间结果。

请注意，不同的编程语言，HMAC 库函数中参数顺序可能不一样，此处的伪代码密钥参数在后，请以实际编程语言为准。通常标准库函数会提供二进制格式的计算值，也即此处使用的，也会提供打印友好的十六进制格式的计算值，将在下面计算签名结果时使用。

|  字段名称    | 解释                                                    |
|------------|---------------------------------------------------------|
| AppSecret  | 原始的AppSecret 即 Nbr4GOmz1BBzc4RJC6yjLm295pfjgZJr***** |
| Date       | 即 Credential 中的 Date 字段信息。此示例取值为 2020-09-16。  |
| Service    | 即 Credential 中的 Service 字段信息。此示例取值为 edu。      |

2）计算签名，伪代码如下：

```
Signature = HexEncode(HMAC_SHA256(SecretSigning, StringToSign))
```

此示例计算结果是 4b3fad50c5bb5f73a84fdd061f0aeb7c12fc7d7a4679f48df0a1635c41244241

**4. 拼接 Authorization**

按如下格式拼接 Authorization：

```
Authorization =
    Algorithm + ' ' +
    'Credential=' + AppId + '/' + CredentialScope + ', ' +
    'SignedHeaders=' + SignedHeaders + ', ' +
    'Signature=' + Signature
```

| 字段名称          | 解释                                                                                 |
|-----------------|--------------------------------------------------------------------------------------|
| Algorithm       | 签名方法，固定为 KE1-HMAC-SHA256。                                                      |
| AppId           | 分配的应用 AppId，即 jLm29RJC6y5m29RJCpfjg*****                                         |
| CredentialScope | 见上文，凭证范围。此示例计算结果是 2020-09-16/edu/ke1_request                               |
| SignedHeaders   | 见上文，参与签名的头部信息。此示例取值为 content-type;host。                                  |
| Signature       | 签名值。此示例计算结果是 4b3fad50c5bb5f73a84fdd061f0aeb7c12fc7d7a4679f48df0a1635c41244241 |

根据以上规则，示例中得到的值为：

```
KE1-HMAC-SHA256 Credential=jLm29RJC6y5m29RJCpfjg*****/2020-09-16/edu/ke1_request, SignedHeaders=content-type;host, Signature=4b3fad50c5bb5f73a84fdd061f0aeb7c12fc7d7a4679f48df0a1635c41244241
```

最终完整的调用信息如下：

```
GET https://api.ke.qq.com/cgi-proxy/open/v1/course/info?term_id=10000
Authorization: KE1-HMAC-SHA256 Credential=jLm29RJC6y5m29RJCpfjg*****/2020-09-16/edu/ke1_request, SignedHeaders=content-type;host, Signature=4b3fad50c5bb5f73a84fdd061f0aeb7c12fc7d7a4679f48df0a1635c41244241
Content-Type: application/x-www-form-urlencoded
Host: api.ke.qq.com
X-KE-Timestamp: 1600236479
X-KE-Version: v1.0.0
```

[>>>返回](#开发前必读)




## 2. <span id="课程相关API">课程相关API</span>

### <span id="发布直播课">发布直播课</span>

该API用于为特定老师发布一门直播课

**请求方式：** POST（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/publish

**请求包体：**

```json
{
    "name": "计算机基础",
    "visible_scope": 0,
    "teacher_id": "user1"
}
```

**参数说明：**

| 参数名称      | 类型   | 必选 | 说明                                                      |
| ------------- | ------ | ---- | --------------------------------------------------------- |
| name          | String | 是   | 课程名                                                    |
| visible_scope | Int32  | 否   | 课程学习可见范围属性， 0-公开 1-指定范围，默认0           |
| teacher_id    | String | 是   | 第三方用户id |

**权限说明：**

1. 一分钟内仅能为一个用户发布一门课程，一个用户最多拥有20门课程。
2. 在teacher_id没有登录课堂时，课堂会同步注册课堂账号。

**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "term_id":1234567,
        "live_url":"https://ke.qq.com/webcourse/xxxxx/xxxxx#taid=xxxxx&lite=1"
    }
}
```

**返回字段说明：**

| 字段名称 | 类型  | 必选 | 说明     |
| -------- | ----- | ---- | -------- |
| term_id  | Int32 | 是   | 直播间id |
| live_url | String | 是  | 直播链接 |

[>>>返回](#课程相关API)



### <span id="修改直播课属性">修改直播课属性</span>
该API用于修改直播课程名字和课程公开标记

**请求方式：** POST（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/modify

**请求包体：**

```json
{
    "term_id": 1233444,
    "visible_scope": 0,
    "name": "操作系统原理"
}
```

**参数说明：**

| 参数名称      | 类型   | 必选 | 说明                                     |
| ------------- | ------ | ---- | ---------------------------------------- |
| term_id       | Int32  | 是   | 直播间id                                 |
| visible_scope | Int32  | 否   | 课程学习可见范围属性， 0-公开 1-指定范围 |
| name          | String | 否   | 课程名                                   |

**返回结果：**

```json
{
    "retcode":0
}
```

[>>>返回](#课程相关API)

### <span id="删除直播课">删除直播课</span>
该API用于删除直播课程

**请求方式：** POST（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/delete

**请求包体：**

```json
{
    "teacher_id": "user1",
    "term_id": 1233444
}
```

**参数说明：**

| 参数名称      | 类型   | 必选 | 说明                                     |
| ------------- | ------ | ---- | ---------------------------------------- |
| teacher_id    | String | 是   | 第三方用户id |
| term_id       | Int32  | 是   | 直播间id                                 |

**返回结果：**

```json
{
    "retcode":0
}
```

[>>>返回](#课程相关API)


### <span id="修改直播课可见范围">修改直播课可见范围</span>
该API用于设置直播课可学习组织架构范围

**请求方式：** POST（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/authorize

**请求包体：**
```json
{
    "term_id": 1233444,
    "dept_list": [
        "idaas_dir_id3",
        "idaas_dir_id4"
    ],
    "user_list": [
        "user_id"
    ]
}
```

**参数说明：**

| 参数名称     | 类型   | 必选 | 说明                                                  |
| ------------ | ------ | ---- | ----------------------------------------------------- |
| term_id      | Int32  | 是   | 直播间id                                              |
| dept_list    | String | 否   | 课程可学习部门列表，dept_list和user_list至少2选1      |
| user_list    | String | 否   | 课程可学习用户列表，dept_list和user_list至少2选1      |
| idaas_dir_id | String | 否   | 通讯录目录id，请参考：[通讯录相关API](#通讯录相关API) |
| user_id      | String | 否   | 通讯录用户id，请参考：[通讯录相关API](#通讯录相关API) |



**返回结果：**

```json
{
    "retcode":0
}
```

**注意事项：**

1. dept_list 和 user_list 需通过<a href="#获取通讯录组织结构">获取通讯录组织结构</a>接口获取到。
2. API接口设置成功后接入方组织架构有变更，课堂不会立即同步，可能出现权限范围失效。
3. 课程可学习范围以最后一次提交的目录和用户列表数据为准，因此，若存在追加可见范围，需由开发者保证提交数据的完整性；直播课当前可学习范围可通过接口<a href="#获取直播课信息">获取直播课信息</a>获取。
4. 可学习组织架构范围存在交集时，可学习范围将取并集。

[>>>返回](#课程相关API)



### <span id="变更直播课上课老师">变更直播课上课老师</span>
该API用于变更直播课上课老师

**请求方式：** POST（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/change_teacher

**请求包体：**

```json
{
    "term_id": 1233444,
    "teacher_id": "userid"
}
```

**参数说明：**

| 参数名称   | 类型   | 必选 | 说明                                                      |
| ---------- | ------ | ---- | --------------------------------------------------------- |
| term_id    | Int32  | 是   | 直播间id                                                  |
| teacher_id | String | 是   | 第三方用户id |



**权限说明：**
在teacher_id没有登录课堂时，课堂会同步注册课堂账号



**返回结果：**

```json
{
    "retcode":0
}
```
[>>>返回](#课程相关API)



### <span id="获取直播课列表">获取直播课列表</span>

该API获取appid作用域下所有直播课或某个老师的课程

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/list?page=1&page_size=20&teacher_id=userid

**参数说明：**

| 参数名称   | 类型   | 必选 | 说明                                                         |
| ---------- | ------ | ---- | ------------------------------------------------------------ |
| teacher_id | String | 是   | 第三方用户id |
| page       | Int32  | 是   | 分页序号，第一页序号为1                                      |
| page_size  | Int32  | 是   | 分页大小，最大分页50                                         |



**返回结果：**

```json
{
    "retcode":0 ,
    "result":{
        "course_list":[
            {
                "term_id": 1233444,
                "teacher_id":"xxxxx"
            }
        ],
    "page_next":0
    }
}
```

**返回字段说明：**

| 字段名称   | 类型   | 必选 | 说明                                                      |
| ---------- | ------ | ---- | --------------------------------------------------------- |
| term_id    | Int32  | 是   | 直播间id                                                  |
| teacher_id | String | 是   | 第三方用户id |
| page_next  | Int32  | 是   | 下一页序号，当为0时表示没有下一页了                       |

[>>>返回](#课程相关API)




### <span id="获取直播课信息">获取直播课信息</span>
该API获取指定直播课信息详情

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/info?term_id=XXXXX

**参数说明：**

| 参数名称 | 类型  | 必选 | 说明     |
| -------- | ----- | ---- | -------- |
| term_id  | Int32 | 是   | 直播间id |



**返回结果：**

```json
{
    "retcode":0 ,
    "result":{
        "term_id": 1233444,
        "live_url":"https://ke.qq.com/webcourse/xxxxx/xxxxx#taid=xxxxx&lite=1",
        "name": "计算机基础",
        "teacher_id":"xxxxx",
        "visible_scope":0
    }
}
```

**返回字段说明：**

| 字段名称      | 类型   | 必选 | 说明                                     |
| ------------- | ------ | ---- | ---------------------------------------- |
| term_id       | Int32  | 是   | 直播间id                                 |
| name          | String | 是   | 课程名                                   |
| visible_scope | Int32  | 是   | 课程学习可见范围属性， 0-公开 1-指定范围 |
| live_url      | String | 是   | 直播链接 |

[>>>返回](#课程相关API)



### <span id="获取直播课任务列表">获取直播课任务列表</span>
该API获取直播课下任务列表


**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/course/task_list?term_id=XXXX&page=1&page_size=20

**参数说明：**

| 参数名称  | 类型  | 必选 | 说明                    |
| --------- | ----- | ---- | ----------------------- |
| term_id   | Int32 | 是   | 直播间id                |
| page      | Int32 | 是   | 分页序号，第一页序号为1 |
| page_size | Int32 | 是   | 分页大小，最大分页50    |



**返回结果：**

```json
{
    "retcode":0 ,
    "result":{
        "task_list":[
            {
                "task_name":"二进制" ,
                "task_id":123 ,
                "start_time":13788818288 ,
                "end_time":13788819288 ,
                "duration":3600
            }
        ],
       "page_next":0
    }
}
```

**返回字段说明：**

| 字段名称    | 类型   | 必选 | 说明                                |
| ----------- | ------ | ---- | ----------------------------------- |
| task_name   | String | 是   | 任务名字                            |
| task_id     | Int64  | 是   | 任务id                              |
| start_time  | Int32  | 是   | 任务开始时间                        |
| end_time    | Int32  | 是   | 任务结束时间                        |
| duration    | Int32  | 是   | 任务授课时长                        |
| page_next   | Int32  | 是   | 下一页序号，当为0时表示没有下一页了 |

[>>>返回](#课程相关API)



### 错误码表
| API错误码 | 错误信息        |
| --------- | --------------- |
|40018500|参数错误|
|40018501|老师不在白名单|
|40018502|获取绑定课失败|
|40018503|绑定课程失败|
|40018504|查询老师失败|
|40018505|老师是其它机构的老师|
|40018506|更新老师信息失败|
|40018507|更新任务信息失败|
|40018508|更新班级信息失败|
|40018509|更新课程信息失败|
|40018510|更新老师角色失败|
|40018511|老师课程不存在|
|40018512|课程资源不足|
|40018513|更新课程名失败|
|40018514|获取注册信息失败|
|40018515|老师注册失败|
|40018516|更新注册信息失败|
|40018517|直播课并行上课过多|
|40018518|非手机注册用户|
|40018519|没有找到该老师的任务|
|40018520|删除回放任务失败|
|40018521|课堂名称不符合要求，请重新设置。|
|40018522|课堂名称或授课内容不符合要求，请重新设置。|
|40018523|学校名称、科目或姓名不符合要求，请重新设置。|
|40018524|课程不存在|
|40018525|开课数目超过限制|
|40018526|接口访问失败|
|40018527|网络异常|
|40018528|接口数据响应有误|
|40018529|获取老师班级列表失败|
|40018530|课程不属于当前账号|
|40018531|查询班级信息失败|
|40016875|查询授课内容失败|
|40016876|写入授课内容失败|
|40016877|更新授课内容失败|
|40016878|解除授课内容失败|
|40016879|解除关联课失败|
|40016880|切换老师失败|
[>>>返回](#课程相关API) &emsp;&emsp; [目录<<<](#API文档)




---

## 3. <span id="回放相关API">回放相关API</span>

### <span id="获取直播课回放列表">获取直播课回放列表</span>

该API获取一门直播课的回放列表

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/replay/list?term_id=XXXX&page=1&page_size=20

**参数说明：**

| 参数名称  | 类型  | 必选 | 说明                    |
| --------- | ----- | ---- | ----------------------- |
| term_id   | Int32 | 是   | 直播间id                |
| page      | Int32 | 是   | 分页序号，第一页序号为1 |
| page_size | Int32 | 是   | 分页大小，最大分页50    |



**返回结果：**

```json
{
    "retcode":0 ,
    "result":{
        "replay_list":[
            {
                "vid": "Abcddd233xcaldjf",
                "name": "计算机基础.mp4",
                "timelen": 123
            }
        ],
       "page_next":0
    }
}
```

**返回字段说明：**

| 字段名称  | 类型   | 必选 | 说明                                |
| --------- | ------ | ---- | ----------------------------------- |
| vid       | String | 是   | 视频id                              |
| name      | String | 是   | 视频名字                            |
| timelen   | Int32  | 是   | 回放时长，单位秒                    |
| page_next | Int32  | 是   | 下一页序号，当为0时表示没有下一页了 |

[>>>返回](#回放相关API)



### <span id="直播课回放下载">直播课回放下载</span>

该API获取直播课回放下载地址


**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/replay/download?vid=XXXX

**参数说明：**

| 参数名称 | 类型   | 必选 | 说明   |
| -------- | ------ | ---- | ------ |
| vid      | String | 是   | 视频id |



**返回结果：**

```json
{
    "retcode":0 ,
    "result":{
        "download_url":"xxxxxxxxxx"
    }
}
```

**返回字段说明：**

| 字段名称     | 类型   | 必选 | 说明            |
| ------------ | ------ | ---- | --------------- |
| vid          | String | 是   | 视频id          |
| download_url | String | 是   | 视频下载地址url |



### 错误码表

| API错误码 | 错误信息        |
| --------- | --------------- |
|40031001|参数错误|
|40031002|视频没找到|
|40031003|视频下载链接获取异常|
|40031004|视频下载链接签名异常|
|40031005|鉴权失败|
[>>>返回](#回放相关API) &emsp;&emsp; [目录<<<](#API文档)


---
&nbsp;
## 4. <span id="数据相关API">数据相关API</span>

### <span id="获取直播课题目信息">获取直播课题目信息</span>

该API获取直播课下的题目信息


**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/live/course_exam?term_id=XXXX&page=1&page_size=20

**参数说明：**

| 参数名称  | 类型  | 必选 | 说明                    |
| --------- | ----- | ---- | ----------------------- |
| term_id   | Int32 | 是   | 直播间id                |
| page      | Int32 | 是   | 分页序号，第一页序号为1 |
| page_size | Int32 | 是   | 分页大小，最大分页50    |



**返回结果：**

```json
{
  "retcode": 0,
  "result": {
    "course_name": "计算机基础",
    "exam_list": [
      {
        "exam_id": 123,
        "exam_time": 1589939399,
        "exam_type": 1,
        "options_count": 2
      }
    ],
    "page_next": 1
  }
}
```

**返回字段说明：**

| 字段名称      | 类型     | 必选 | 说明                                       |
| ------------- | -------- | ---- | ------------------------------------------ |
| course_name   | String   | 是   | 课堂名称                                   |
| exam_list     | JsonList    | 是   | 题目列表                             |
| exam_id     | Int32    | 是   | 题目唯一id                              |
| exam_time     | Int32    | 是   | 发起答题时间                               |
| exam_type     | Int32    | 是   | 答题类型 1-单选 2-多选                     |
| options_count          | int32   | 是   | 设置的选项个数                             |
| page_next     | Int32    | 是   | 下一页序号，当为0时表示没有下一页了        |

[>>>返回](#数据相关API)


### <span id="获取直播课题目答题信息">获取直播课题目答题信息</span>

该API获取直播课题目的答题信息

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/live/course_answer?term_id=XXXX&exam_id=xxx&page=1&page_size=20

**参数说明：**

| 参数名称  | 类型  | 必选 | 说明                    |
| --------- | ----- | ---- | ----------------------- |
| term_id   | Int32 | 是   | 直播间id                |
| exam_id   | Int32 | 是   | 题目id                |
| page      | Int32 | 是   | 分页序号，第一页序号为1 |
| page_size | Int32 | 是   | 分页大小，最大分页50    |



**返回结果：**

```json
{
  "retcode": 0,
  "result": {
    "answer_num": 100,
    "stu_num": 100,
    "answer_list": [
      {
        "has_answer":1,
        "submit_answer_list": [
          1,
          2
        ],
        "student_id": "1233444",
        "student_name": "wangwu",
        "student_pic_url": "图片链接"
      }
    ],
    "page_next": 1
  }
}

```

**返回字段说明：**

| 字段名称      | 类型     | 必选 | 说明                                       |
| ------------- | -------- | ---- | ------------------------------------------ |
| answer_num   | int32   | 是   | 实际提交答题卡人数                                   |
| stu_num   | int32   | 是   | 应答题学生人数（报名总人数）                                   |
| has_answer   | int32   | 是   | 是否回答，1是已回答，0是未回答                                   |
| answer_list     | JsonList    | 否   | 答题学生信息                             |
| submit_answer_list | JsonList   | 是   | 提交的答案,从1开始对应A，可能多个                                 |
| student_id    | String | 是   | 答题人账号（接入方通讯录用户id）                   |
| student_name  | String   | 是   | 答题人姓名（接入方通讯录用户名）                |
| student_pic_url  | String   | 是   | 学生头像链接                                 |
| page_next     | Int32    | 是   | 下一页序号，当为0时表示没有下一页了        |

[>>>返回](#数据相关API)


### <span id="获取直播课聊天信息">获取直播课聊天信息</span>
该API获取直播课下的聊天信息


**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/live/course_chat?term_id=XXXX&page=1&page_size=20

**参数说明：**

| 参数名称    | 类型  | 必选  | 说明                    |
| --------- | ----------------------- | ----------------------- | ----------------------- |
| term_id   | Int32 | 是  | 直播间id                |
| page      | Int32 | 是     | 分页序号，第一页序号为1 |
| page_size | Int32 | 是 | 分页大小，最大分页50    |



**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "course_name":"计算机基础",
        "chat_list":[
            {
                "chat_content":[
                    {
                        "elem_type":1,
                        "msg_text":{
                            "str":"我是一段文本消息"
                        }
                    },
                    {
                        "elem_type":2,
                        "msg_face":{
                            "index":1234
                        }
                    },
                    {
                        "elem_type":3,
                        "msg_not_online_image":{
                            "pic_url":"图片链接"
                        }
                    }
                ],
                "chat_time":1589939399,
                "student_id":"1233444",
                "student_name":"wangwu",
                "student_phone":"13910000000",
                "student_pic_url":"图片链接"
            }
        ],
        "page_next":10
    }
}
```

**返回字段说明：**

| 字段名称      | 类型    | 必选    | 说明                                |
| ------------- | ----------------------------------- | ----------------------------------- | ----------------------------------- |
| course_name   | String | 是 | 课堂名称                            |
| chat_list | JsonList | 是 | 聊天列表            |
| chat_content  | JsonMap | 是 | 发言内容,由多个元素组成，最终内容是按元素拼接结果                            |
| elem_type     | Int32 | 是 | 元素类型，1-文本，2-表情符号，3-图片，三种消息类型必有其一 |
| msg_text      | JsonMap | 否 | 文本消息结构                          |
| str           | String     | 否 | 文本消息内容                           |
| msg_face      | String | 否 | 表情符号消息结构                        |
| index         | Int32    | 否 | 表情符号索引                            |
| msg_not_online_image| String | 否 | 离线图片消息结构                        |
| pic_url     | String | 否 | 图片链接                            |
| chat_time     | Int32 | 是 | 发言时间                            |
| student_id    | String | 是 | 发言人id（接入方通讯录用户id）                |
| student_name  | String | 是 | 发言人姓名（接入方通讯录用户名字）            |
| page_next     | Int32 | 是 | 下一页序号，当为0时表示没有下一页了 |

[>>>返回](#数据相关API)

&nbsp;
### <span id="获取直播课任务考勤详情">获取直播课任务考勤详情</span>
该API获取直播课下任务考情详情数据，直播任务信息可通过接口<a href="#获取直播课任务列表">获取直播课任务列表</a>获取，目前支持获取30天内的考勤信息。

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/data/study_detail?term_id=XXXX&task_id=XXXX&page=1&page_size=20&type=1

**参数说明：**

| 参数名称 | 类型  | 必选 | 说明                         |
| -------- | ----- | ---- | ---------------------------- |
| term_id  | Int32 | 是   | 直播间id                     |
| task_id  | Int32 | 是   | 课程任务id                   |
| page      | Int32 | 是     | 分页序号，第一页序号为1 |
| page_size | Int32 | 是 | 分页大小，最大分页50    |



**返回结果：**

```json
{
  "retcode": 0,
  "result": {
    "kq_student_info": [
      {
        "student_index": 111,
        "teacher_name": "老师",
        "student_name": "学生姓名",
        "student_id": "123",
        "is_watch_live": 1,
        "enter_live_time": 1589939399,
        "watching_live": 12,
        "is_watch_playback": 1,
        "watching_live_duration": 12,
        "stu_pic": "http://xxx/xx",
        "stu_phone": "xxxxxx"
      }
    ],
    "kq_student_count": 100,
    "ke_content": "授课内容",
    "kq_task_info": {
      "live_time": 1589939399,
      "live_duration": 1309,
      "live_student_num": 100,
      "play_back_num": 0
    },
    "page_next": 10
  }
}
```

**返回字段说明：**

| 字段名称       | 类型   | 必选 | 说明                                         |
| -------------- | ------ | ---- | -------------------------------------------- |
| kq_student_info       | String | 是   | 考勤信息列表                                     |
| student_index        | uint64 | 是   | 学生序号                                     |
| teacher_name      | String | 是  | 授课老师 |
| student_name  | String  | 是   | 学生姓名                     |
| student_id | String  | 是   | 学生id                    |
| is_watch_live      | int32  | 是   | 是否观看直播,1=是，0=否          |
| enter_live_time        | int32 | 是   | 进入直播时间，如1589939399                                   |
| watching_live      | int32 | 是  | 观看直播时长秒数，如1309 |
| is_watch_playback  | int32  | 是   |是否观看回放,1=是，0=否                     |
| watching_live_duration | int32  | 是   | 观看回放时长秒数，如1309                     |
| kq_student_count      | uint64  | 是   | 有考勤学生总数          |
| ke_content        | String | 是   | 授课内容                                    |
| kq_task_info        | String | 是   | 考勤任务详情                                     |
| live_time      | int32 | 是   | 直播时间，如1589939399 |
| live_duration  | int32  | 是   | 直播时长秒数，如1309                     |
| live_student_num | Int32  | 是   | 直播观看人数                     |
| play_back_num | Int32  | 是   | 回放观看人数                     |
| page_next      | Int32  | 是   | 下一页序号，当为0时表示没有下一页了          |

[>>>返回](#数据相关API)



### 错误码表

| API错误码 | 错误信息        |
| --------- | --------------- |
|10020001|系统繁忙，请稍后重试|
|10020002|数据库繁忙，请稍后重试|
|40020001|参数错误。|
|40021001|处理消息错误|
|40021002|答案格式错误|
|40021003|获取班级报名列表错误|
|40021004|获取开放平台账号信息错误|
[>>>返回](#数据相关API) &emsp;&emsp; [目录<<<](#API文档)

---
&nbsp;
## 5. <span id="通讯录相关API">通讯录相关API</span>

### <span id="获取根部门信息">获取根部门信息</span>

该API获取接入方通讯录中的根部门信息

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/dept/root

**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "dept_id":"dp-c65190017f394836863e83ca429b500c",
        "tenant_id":"tn-c65190017f394836863e83ca429b500c",
        "parent_id":"",
        "dept_name":"上海开放大学"
    }
}
```

**返回字段说明：**

| 字段名称       |        |      | 说明                           |
| -------------- | ------ | ---- | ------------------------------ |
| dept_id        | String | 是   | 部门ID                      |
| parent_id      | String | 是   | 部门父节点ID                 |
| dept_name      | String | 是   | 部门名称                     |

[>>>返回](#通讯录相关API)



### <span id="获取子部门信息">获取子部门信息</span>

该API获取接入方通讯录中的子部门信息

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/dept/sub?dept_id=XXXX&page_index=XXXX&page_size=XXXX

**参数说明：**

| 参数名称     | 类型   | 必选 | 说明                                 |
| ------------ | ------ | ---- | ------------------------------------ |
| dept_id      | String | 是   | 部门ID                              |
| page_index   | Int32  | 是   | 起始页码（从0开始）                            |
| page_size    | Int32  | 是   | 分页大小                            |



**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "dept_list":[
            {
                "dept_id":"dp-e3a7aeedeed349ce9bcc9005787084d6",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "ancestor":[
                    "dp-c65190017f394836863e83ca429b500c",
                    "dp-9ac53a017cbd433b88cc1254cf1770e8"
                ],
                "parent_id":"dp-9ac53a017cbd433b88cc1254cf1770e8",
                "dept_name":"19春新世界工商专"
            },
            {
                "dept_id":"dp-0600c356f4b847c4b2d1a3c9d512d033",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "ancestor":[
                    "dp-c65190017f394836863e83ca429b500c",
                    "dp-9ac53a017cbd433b88cc1254cf1770e8"
                ],
                "parent_id":"dp-9ac53a017cbd433b88cc1254cf1770e8",
                "dept_name":"2019秋航空运输学院工商管理专科"
            }
        ]
    }
}
```

**返回字段说明：**

| 字段名称       |        |      | 说明                           |
| -------------- | ------ | ---- | ------------------------------ |
| dept_list      | JsonList | 是 | 子部门列表                      |
| dept_id        | String | 是   | 部门ID                      |
| ancestor       | JsonList| 是  | 部门祖先节点（从根到自己）     |
| parent_id      | String | 是   | 部门父节点ID                 |
| dept_name      | String | 是   | 部门名称                     |

[>>>返回](#通讯录相关API)

### <span id="获取部门用户信息">获取部门用户信息</span>

该API获取接入方通讯录中的部门用户信息

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/dept/user?dept_id=XXXX&page_index=XXXX&page_size=XXXX

**参数说明：**

| 参数名称     | 类型   | 必选 | 说明                                 |
| ------------ | ------ | ---- | ------------------------------------ |
| dept_id      | String | 是   | 部门ID                              |
| page_index   | Int32  | 是   | 起始页码（从0开始）                            |
| page_size    | Int32  | 是   | 分页大小                            |



**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "user_list":[
            {
                "username":"kest002",
                "phone_num":"18503060002",
                "ids_uid":"us-fa732cf93d2a4907a1a47424c38de54f",
                "employee_number":"1002",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "primary_mail":"kest002@qq.com",
                "dept_id":"dp-9469a73fa9ce40aab705d4b7ae07ce91",
                "display_name":"kest002",
                "source_id": "test002"
            },
            {
                "username":"kest001",
                "phone_num":"18503060001",
                "ids_uid":"us-fa732cf93d2a4907a1a47424c38de54f",
                "employee_number":"1001",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "primary_mail":"kest001@qq.com",
                "dept_id":"dp-9469a73fa9ce40aab705d4b7ae07ce91",
                "display_name":"kest001",
                "source_id": "test001"
            }
        ]
    }
}
```

**返回字段说明：**

| 字段名称       |        |      | 说明                           |
| -------------- | ------ | ---- | ------------------------------ |
| user_list      | JsonList| 是 | 部门用户列表                      |
| username       | String | 是   | 用户名                       |
| phone_num      | String | 是   | 用户手机号                    |
| ids_uid        | String | 是   | 用户UID                      |
| employee_number| String | 是   | 用户雇员编号                  |
| primary_mail   | String | 是   | 用户邮箱                      |
| dept_id        | String | 是   | 用户所属部门ID                |
| display_name   | String | 是   | 用户展示名称                  |

[>>>返回](#通讯录相关API)

### <span id="检索部门信息">检索部门信息</span>

该API用于在接入方通讯录中检索部门信息

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/dept/search?keywords =XXXX&page_index=XXXX&page_size=XXXX

**参数说明：**

| 参数名称     | 类型   | 必选 | 说明                                 |
| ------------ | ------ | ---- | ------------------------------------ |
| keywords     | String | 是   | 搜索关键字                             |
| page_index   | Int32  | 是   | 起始页码（从0开始）                               |
| page_size    | Int32  | 是   | 分页大小                               |



**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "dept_list":[
            {
                "dept_id":"dp-604965b0a4ec48489e144feff4a05d81",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "ancestor":[
                    "dp-c65190017f394836863e83ca429b500c",
                    "dp-68cbe5390f0a47009f2893693f299617"
                ],
                "parent_id":"dp-d554cb31b1dc4aa484c8fc2a0f57a647",
                "dept_name":"19秋高起专时尚坤阳行政管理"
            },
            {
                "dept_id":"dp-604965b0a4ec48489e144feff4a05d81",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "ancestor":[
                    "dp-c65190017f394836863e83ca429b500c",
                    "dp-d554cb31b1dc4aa484c8fc2a0f57a647"
                ],
                "parent_id":"dp-d554cb31b1dc4aa484c8fc2a0f57a647",
                "dept_name":"19秋高起专时尚坤阳行政管理"
            }
        ],
        "total":1512
    }
}
```

**返回字段说明：**

| 字段名称       |        |      | 说明                           |
| -------------- | ------ | ---- | ------------------------------ |
| total          | Int32  | 是   | 本次结果总数                     |
| dept_list      | JsonList | 是 | 子部门列表                      |
| dept_id        | String | 是   | 部门ID                      |
| ancestor       | StringList| 是 | 部门祖先节点（从根到自己）   |
| parent_id      | String | 是   | 部门父节点ID                 |
| dept_name      | String | 是   | 部门名称                     |

[>>>返回](#通讯录相关API)

### <span id="检索部门用户信息">检索部门用户信息</span>

该API用于在接入方通讯录中检索部门用户信息

**请求方式：** GET（HTTPS）

**请求地址：** https://api.ke.qq.com/cgi-proxy/open/v1/dept/user_search?keywords=XXXX&page_index=XXXX&page_size=XXXX

**参数说明：**

| 参数名称     | 类型   | 必选 | 说明                                 |
| ------------ | ------ | ---- | ------------------------------------ |
| keywords     | String | 是   | 搜索关键字                             |
| page_index   | Int32  | 是   | 起始页码（从0开始）                            |
| page_size    | Int32  | 是   | 分页大小                            |



**返回结果：**

```json
{
    "retcode":0,
    "result":{
        "total":3,
        "user_list":[
            {
                "username":"2007051",
                "phone_num":"13818896037",
                "ids_uid":"us-54be43262e41488eabd0c039fc56487c",
                "employee_number":"",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "primary_mail":"2007051@nomail.com",
                "dept_id":"dp-c65190017f394836863e83ca429b500c",
                "display_name":"卢昉捷",
                "source_id": "test001"
            },
            {
                "username":"admin",
                "phone_num":"",
                "ids_uid":"us-54be43262e41488eabd0c039fc56487c",
                "employee_number":"",
                "tenant_id":"tn-c65190017f394836863e83ca429b500c",
                "primary_mail":"admin@nomail.com",
                "dept_id":"dpf-c65190017f394836863e83ca429b500c",
                "display_name":"admin",
                "source_id": "test002"
            }
        ]
    }
}
```

**返回字段说明：**

| 字段名称       |        |      | 说明                           |
| -------------- | ------ | ---- | ------------------------------ |
| total          | Int32  | 是   | 本次结果总数                     |
| user_list      | JsonList| 是 | 部门用户列表                      |
| username       | String | 是   | 用户名                       |
| phone_num      | String | 是   | 用户手机号                    |
| ids_uid        | String | 是   | 用户UID                      |
| employee_number| String | 是   | 用户雇员编号                  |
| primary_mail   | String | 是   | 用户邮箱                      |
| dept_id        | String | 是   | 用户所属部门ID                |
| display_name   | String | 是   | 用户展示名称                  |

[>>>返回](#通讯录相关API)



### 错误码表

| API错误码 | 错误信息        |
| --------- | --------------- |
|40043275|获取子部门数据失败，请稍后重试|
|40043276|获取根部门数据失败，请稍后重试|
|40043277|搜索部门数据失败，请稍后重试|
|40043278|搜索用户数据失败，请稍后重试|
|40043280|输入参数错误，请检测请求参数信息|
[>>>返回](#通讯录相关API)  [目录<<<](#API文档)



## <span id="附录">附录</span>

### <span id="基础错误码表">基础错误码表</span>

| HTTP状态码 | 错误信息    | 错误描述     |
| ---------- | ----------- | ------------ |
| 200        | null        | 正常请求     |
| 302        | null        | 正常请求     |
| 404        | NoPrivate   | 没有接口权限 |
| 404        | NoInterface | 接口不存在   |




| API错误码 | 错误信息        |
| --------- | --------------- |
|10000001|系统繁忙，请稍后重试|
|10000100|底层PRC调用失败|
|10000101|底层PRC创建失败|
|40000101|一分钟内业务调用次数过多，请稍后重试。|
|40000102|今天业务调用次数过多，请求被限制。|
|40000103|一分钟内接口调用次数过多，请求被限制。|
|40000104|今天接口调用次数过多，请稍后重试。|
|40000105|参数错误|
|40000106|API签名错误|
|40000107|课程验证失败|
